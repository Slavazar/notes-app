import{m as h,v as F,f as r,a as u,u as c,w as f,F as p,o as i,X as L,b as e,d as b,g as k,C as N,i as S,B as C,O as _,t as M}from"./app-088260e6.js";import{_ as W}from"./AuthenticatedLayout-e8a8a1b0.js";import H from"./Modal-2af52d53.js";import{P as I}from"./Pagination-2cd15f57.js";import"./_plugin-vue_export-helper-c27b6911.js";const R=e("h2",{class:"page-title"},"Notes",-1),X={class:"row mb-3"},q={class:"col"},z=["onClick"],G={class:"row mb-3"},J={class:"col-md-6"},K={class:"row"},Q=e("div",{class:"col-md-2"},[e("label",{class:"form-label"},"Search")],-1),Y={class:"col-md-10"},Z=["value"],ee={class:"row items mb-3"},te={key:0,class:"col-12"},oe=e("div",{class:"fst-italic mt-3"},"No items",-1),se=[oe],ae=["id"],le={class:"card"},re={class:"card-body"},ie={class:"card-title"},ne=["innerHTML"],ce={class:"actions"},de=["onClick"],ue=["onClick"],_e={key:0,class:"alert alert-danger"},me={class:"mb-3"},ve=e("label",{class:"form-label"},"Title",-1),he={class:"mb-3"},fe=e("label",{class:"form-label"},"Description",-1),xe={__name:"Index_2",props:{user_notes:{type:Object},search_text:{type:String}},setup(d){const m=h(!1),l=h(null),g=h(null);async function U(a){let o=a.target.value;clearTimeout(g.value),g.value=setTimeout(function(){_.get(route("account.notes.index"),{search:o},{preserveState:!0,preserveScroll:!0})},500)}const s=F({id:null,title:null,description:null}),T=()=>{_.get(route("account.notes.index"),{},{preserveState:!1,preserveScroll:!1})},V=()=>{_.reload({preserveState:!1,preserveScroll:!1})};function O(a,o){return a.length>o?a.slice(0,o-1)+" &hellip;":a}const w=()=>{m.value=!0};function v(){m.value=!1,l.value=null,s.reset()}const $=()=>{w()},B=()=>{const a=route("account.notes.store");window.axios.post(a,{title:s.title,description:s.description}).then(o=>{if(o.data.error){if(o.data.error.code==406){l.value=[];let t=o.data.error.errors;Object.entries(t).forEach(n=>{let[y,x]=n;l.value=l.value.concat(x)})}else l.value=[o.data.error.message];return}v(),T()})},D=a=>{const o=route("account.notes.item",{id:a});window.axios.get(o).then(t=>{if(t.data.error){alert(t.data.error.message);return}s.id=t.data.payload.user_note.id,s.title=t.data.payload.user_note.title,s.description=t.data.payload.user_note.description,w()})},E=a=>{const o=route("account.notes.update",{id:a});window.axios.put(o,{title:s.title,description:s.description}).then(t=>{if(t.data.error){if(t.data.error.code==406){l.value=[];let n=t.data.error.errors;Object.entries(n).forEach(y=>{let[x,A]=y;l.value=l.value.concat(A)})}else l.value=[t.data.error.message];return}v(),V()})},P=()=>{s.id?E(s.id):B()};function j(a){var o=confirm("Are you sure to delete the note?");o&&_.delete(route("account.notes.destroy",{id:a}))}return(a,o)=>(i(),r(p,null,[u(c(L),{title:"Notes - Account"}),u(W,null,{header:f(()=>[R]),default:f(()=>[e("div",X,[e("div",q,[e("a",{href:"#",onClick:b($,["prevent"]),class:"btn btn-primary"},"Add a note",8,z)])]),e("div",G,[e("div",J,[e("div",K,[Q,e("div",Y,[e("input",{type:"text",class:"form-control",value:d.search_text,onInput:U},null,40,Z)])])])]),e("div",ee,[d.user_notes.data.length==0?(i(),r("div",te,se)):k("",!0),(i(!0),r(p,null,N(d.user_notes.data,t=>(i(),r("div",{id:`user_note-${t.id}`,class:"col-12 col-sm-6 col-md-4 col-lg-3 mb-3"},[e("div",le,[e("div",re,[e("h5",ie,M(t.title),1),e("div",{class:"card-text mb-3",innerHTML:O(t.description,50)},null,8,ne),e("div",ce,[e("a",{href:"#",onClick:b(n=>D(t.id),["prevent"]),class:"btn btn-primary me-2"},"View",8,de),e("a",{href:"#",onClick:b(n=>j(t.id),["prevent"]),class:"btn btn-danger"},"Delete",8,ue)])])])],8,ae))),256))]),u(I,{links:d.user_notes.links},null,8,["links"]),u(H,{show:m.value,onCloseModal:v,onSaveModal:P},{default:f(()=>[l.value?(i(),r("div",_e,[(i(!0),r(p,null,N(l.value,t=>(i(),r("div",null,M(t),1))),256))])):k("",!0),e("div",me,[ve,S(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=t=>c(s).title=t)},null,512),[[C,c(s).title]])]),e("div",he,[fe,S(e("textarea",{class:"form-control",rows:"3","onUpdate:modelValue":o[1]||(o[1]=t=>c(s).description=t)},null,512),[[C,c(s).description]])])]),_:1},8,["show"])]),_:1})],64))}};export{xe as default};
