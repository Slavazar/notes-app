import{m as _,p as W,v as H,f as l,a as d,u as i,w as m,F as g,o as n,X as R,b as t,d as w,i as b,B as x,l as I,e as X,g as C,C as M,O as v,t as T}from"./app-2a095cd5.js";import{_ as q}from"./AuthenticatedLayout-13c0b1d7.js";import z from"./Modal-f23fd6be.js";import{P as G}from"./Pagination-36714689.js";import"./_plugin-vue_export-helper-c27b6911.js";const J=t("h2",{class:"page-title"},"Notes",-1),K={class:"row mb-3"},Q={class:"col"},Y=["onClick"],Z={class:"row mb-3"},ee={class:"col-md-8"},te={class:"d-flex"},se=t("div",{class:"me-3 align-self-center"}," Search ",-1),oe={class:"flex-grow-1"},ae={class:"ms-3 align-self-center"},re={class:"row items mb-3"},le={key:0,class:"col-12"},ne=t("div",{class:"fst-italic mt-3"},"No items",-1),ie=[ne],ce=["id"],de={class:"card"},ue={class:"card-body"},_e={class:"card-title"},me=["innerHTML"],ve={class:"actions"},fe=["onClick"],he=["onClick"],pe={key:0,class:"alert alert-danger"},ge={class:"mb-3"},we=t("label",{class:"form-label"},"Title",-1),be={class:"mb-3"},xe=t("label",{class:"form-label"},"Description",-1),Me={__name:"Index",props:{user_notes:{type:Object},search_text:{type:String}},setup(u){const U=u,f=_(!1),r=_(null),h=_(U.search_text),y=_(null);W(h,o=>{V(o)});async function V(o){clearTimeout(y.value),y.value=setTimeout(function(){console.log("Searching: "+o),v.get(route("account.notes.index"),{search:o},{preserveState:!0,preserveScroll:!0})},500)}const a=H({id:null,title:null,description:null}),O=()=>{v.get(route("account.notes.index"),{},{preserveState:!1,preserveScroll:!1})},$=()=>{v.reload({preserveState:!1,preserveScroll:!1})};function B(o,s){return o.length>s?o.slice(0,s-1)+" &hellip;":o}const k=()=>{f.value=!0};function p(){f.value=!1,r.value=null,a.reset()}const D=()=>{k()},E=()=>{const o=route("account.notes.store");window.axios.post(o,{title:a.title,description:a.description}).then(s=>{if(s.data.error){if(s.data.error.code==406){r.value=[];let e=s.data.error.errors;Object.entries(e).forEach(c=>{let[N,S]=c;r.value=r.value.concat(S)})}else r.value=[s.data.error.message];return}p(),O()})},P=o=>{const s=route("account.notes.item",{id:o});window.axios.get(s).then(e=>{if(e.data.error){alert(e.data.error.message);return}a.id=e.data.payload.user_note.id,a.title=e.data.payload.user_note.title,a.description=e.data.payload.user_note.description,k()})},j=o=>{const s=route("account.notes.update",{id:o});window.axios.put(s,{title:a.title,description:a.description}).then(e=>{if(e.data.error){if(e.data.error.code==406){r.value=[];let c=e.data.error.errors;Object.entries(c).forEach(N=>{let[S,L]=N;r.value=r.value.concat(L)})}else r.value=[e.data.error.message];return}p(),$()})},A=()=>{a.id?j(a.id):E()};function F(o){var s=confirm("Are you sure to delete the note?");s&&v.delete(route("account.notes.destroy",{id:o}))}return(o,s)=>(n(),l(g,null,[d(i(R),{title:"Notes - Account"}),d(q,null,{header:m(()=>[J]),default:m(()=>[t("div",K,[t("div",Q,[t("a",{href:"#",onClick:w(D,["prevent"]),class:"btn btn-primary"},"Add a note",8,Y)])]),t("div",Z,[t("div",ee,[t("div",te,[se,t("div",oe,[b(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=e=>h.value=e)},null,512),[[x,h.value]])]),t("div",ae,[d(i(I),{class:"",href:o.route("account.notes.index")},{default:m(()=>[X(" Reset ")]),_:1},8,["href"])])])])]),t("div",re,[u.user_notes.data.length==0?(n(),l("div",le,ie)):C("",!0),(n(!0),l(g,null,M(u.user_notes.data,e=>(n(),l("div",{id:`user_note-${e.id}`,class:"col-12 col-sm-6 col-md-4 col-lg-3 mb-3"},[t("div",de,[t("div",ue,[t("h5",_e,T(e.title),1),t("div",{class:"card-text mb-3",innerHTML:B(e.description,50)},null,8,me),t("div",ve,[t("a",{href:"#",onClick:w(c=>P(e.id),["prevent"]),class:"btn btn-primary me-2"},"View",8,fe),t("a",{href:"#",onClick:w(c=>F(e.id),["prevent"]),class:"btn btn-danger"},"Delete",8,he)])])])],8,ce))),256))]),d(G,{links:u.user_notes.links},null,8,["links"]),d(z,{show:f.value,onCloseModal:p,onSaveModal:A},{default:m(()=>[r.value?(n(),l("div",pe,[(n(!0),l(g,null,M(r.value,e=>(n(),l("div",null,T(e),1))),256))])):C("",!0),t("div",ge,[we,b(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=e=>i(a).title=e)},null,512),[[x,i(a).title]])]),t("div",be,[xe,b(t("textarea",{class:"form-control",rows:"3","onUpdate:modelValue":s[2]||(s[2]=e=>i(a).description=e)},null,512),[[x,i(a).description]])])]),_:1},8,["show"])]),_:1})],64))}};export{Me as default};
